"use strict";(self.webpackChunkvue=self.webpackChunkvue||[]).push([[9485],{49485:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=r(33938),a=r(63109),i=r.n(a),o=(r(66992),r(39575),r(41539),r(44197),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(66252)),u=r(85975),c=r(77160),s=(0,o._)("canvas",{width:"600",height:"600",id:"canvas"},null,-1),p=(0,o.aZ)({__name:"WebGPUDemo",setup:function(e){var t,r,a,p,f,l,h="\n    @group(0) @binding(0)  var<uniform> mvp :  mat4x4<f32>;\n    struct Color {\n        @builtin(position) position: vec4<f32>,\n        @location(0) loca1: vec4<f32>,\n    }\n\n    @vertex\n    fn vertex(@location(0) position : vec4<f32>)->Color{\n        var ball :Color;\n        ball.position= mvp  * position;\n        ball.loca1= position;\n        return ball;\n    }\n\n    @fragment\n    fn fragment(ball:Color)->@location(0) vec4<f32>{\n        // let a =  mvp  * ball.loca1 * ball.position * ball.loca1 * ball.position * ball.loca1;\n        let a = ball.loca1;\n        return vec4<f32>  (a);\n    }\n",d=0;function v(e){return x.apply(this,arguments)}function x(){return x=(0,n.Z)(i().mark((function e(t){var r,n,a,o,u,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.gpu){e.next=2;break}throw Error();case 2:return e.next=4,navigator.gpu.requestAdapter({powerPreference:"high-performance"});case 4:if(r=e.sent){e.next=7;break}throw Error();case 7:return e.next=9,r.requestDevice();case 9:if(n=e.sent){e.next=12;break}throw Error();case 12:if(a=document.querySelector(t)){e.next=15;break}throw Error();case 15:if(o=a.getContext("webgpu")){e.next=18;break}throw Error();case 18:return u=navigator.gpu.getPreferredCanvasFormat(),c=[a.clientWidth*window.devicePixelRatio,a.clientHeight*window.devicePixelRatio],o.configure({device:n,format:u,size:c,alphaMode:"opaque"}),s=n.createTexture({size:[600*window.devicePixelRatio,600*window.devicePixelRatio],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),e.abrupt("return",{adapter:r,device:n,canvas:a,context:o,format:u,depthtTextrue:s});case 23:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function m(e,t,r,n,a){return w.apply(this,arguments)}function w(){return w=(0,n.Z)(i().mark((function e(t,r,n,a,o){var u,c,s,p,f=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=f.length>5&&void 0!==f[5]?f[5]:"triangle-strip",c=t.createShaderModule({code:n}),s=t.createShaderModule({code:n}),e.next=5,t.createRenderPipelineAsync({layout:"auto",vertex:{module:c,entryPoint:"vertex",buffers:[{arrayStride:a,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]}]},fragment:{module:s,entryPoint:"fragment",targets:[{format:r}]},primitive:{topology:u,cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});case 5:return p=e.sent,e.abrupt("return",{pipeline:p});case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function g(e,t,r,n,a,i,o){var u=e.createCommandEncoder(),c=u.beginRenderPass({colorAttachments:[{view:r.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:1,g:1,b:1,a:0}}],depthStencilAttachment:{view:i.createView(),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}});c.setPipeline(t),c.setVertexBuffer(0,n),c.setBindGroup(0,o),c.draw(a),c.end();var s=u.finish();e.queue.submit([s])}function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,a=new Float32Array(t),i=e.createBuffer({size:a.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),o=4*n,u=a.byteLength/o;return e.queue.writeBuffer(i,r,a),{vertex:a,vertexBuffer:i,arrayStride:o,count:u}}function b(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Float32Array(r),i=e.createBuffer({size:4*a.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});e.queue.writeBuffer(i,n,a);var o=e.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:i}}]});return{group:o}}var M,P,k,C,I,B,A=0,U=0,S=-3,Z={x:0,y:0,z:0},E=1,D=1,T=1,_=u.Ue(),q=u.Ue(),z=u.Ue();function F(){for(var e=[],t=-1;t<360;t++)for(var r=0;r<360;r++)r%2==0?e.push(Math.sin(Math.PI*t/180)*Math.cos(Math.PI*r/180),Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)*Math.sin(Math.PI*r/180)):e.push(Math.sin(Math.PI*(t+2)/180)*Math.cos(Math.PI*r/180),Math.cos(Math.PI*(t+2)/180),Math.sin(Math.PI*(t+2)/180)*Math.sin(Math.PI*r/180));return e}function G(){return R.apply(this,arguments)}function R(){return(R=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M=F(),P=y(t,M,0,3),e.next=4,m(t,p,h,P.arrayStride,h);case 4:k=e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return L.apply(this,arguments)}function L(){return(L=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cancelAnimationFrame(d),u.lM(_,_,Z.x),u.uD(_,_,Z.y),u.jI(_,_,Z.z),u.Jp(q,z,_),l=b(t,k.pipeline,q).group,g(t,k.pipeline,a,P.vertexBuffer,P.count,f,l),d=requestAnimationFrame(O);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){for(var e=[],t=Math.PI,r=0;r<361;r++)e.push(Math.sin(t*r/180),-1,Math.cos(t*r/180),0,-1,0);e.push(Math.sin(0*t/180),-1,Math.cos(0*t/180));for(var n=0;n<362;n++)e.push(Math.sin(t*n/180),-1,Math.cos(t*n/180),0,1,0);return e}function j(){return J.apply(this,arguments)}function J(){return(J=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C=V(),I=y(t,C,0,3),e.next=4,m(t,p,h,I.arrayStride,h);case 4:B=e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return N.apply(this,arguments)}function N(){return(N=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cancelAnimationFrame(d),u.lM(_,_,Z.x),u.uD(_,_,Z.y),u.jI(_,_,Z.z),u.Jp(q,z,_),l=b(t,B.pipeline,q).group,g(t,B.pipeline,a,I.vertexBuffer,I.count,f,l),d=requestAnimationFrame(W);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H,Y,X=[1,-1,1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1];function K(){return Q.apply(this,arguments)}function Q(){return(Q=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H=y(t,X,0,3),e.next=3,m(t,p,h,H.arrayStride,h,"triangle-list");case 3:Y=e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cancelAnimationFrame(d),u.lM(_,_,Z.x),u.uD(_,_,Z.y),u.jI(_,_,Z.z),u.Jp(q,z,_),l=b(t,Y.pipeline,q).group,g(t,Y.pipeline,a,H.vertexBuffer,H.count,f,l),d=requestAnimationFrame($);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return re.apply(this,arguments)}function re(){return(re=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:O();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return ae.apply(this,arguments)}function ae(){return(ae=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:W();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return oe.apply(this,arguments)}function oe(){return(oe=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:$();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.bv)((0,n.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("#canvas");case 2:n=e.sent,t=n.device,r=n.canvas,a=n.context,p=n.format,f=n.depthtTextrue,u.Iu(_,_,c.al(A,U,S)),u.G3(z,Math.PI/2,r.width/r.height,.1,100),u.bA(_,_,c.al(E,D,T)),u.lM(_,_,Z.x),u.uD(_,_,Z.y),u.jI(_,_,Z.z),u.Jp(q,z,_),Z.x=.03,Z.y=.03,Z.z=.03,te();case 15:case"end":return e.stop()}}),e)})))),function(e,t){var r=(0,o.up)("ShowDemo");return(0,o.wg)(),(0,o.iD)("section",null,[(0,o.Wm)(r,null,{default:(0,o.w5)((function(){return[s]})),_:1}),(0,o._)("div",null,[(0,o._)("button",{id:"one",onClick:ie},"正方体"),(0,o._)("button",{id:"tow",onClick:te},"球"),(0,o._)("button",{id:"three",onClick:ne},"圆锥")])])}}});var f=p}}]);